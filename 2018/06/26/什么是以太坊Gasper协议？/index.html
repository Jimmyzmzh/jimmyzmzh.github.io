<!DOCTYPE HTML>
<html lang="">
<head>
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="BlockCamp">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://blockcamp.net">
    <!--SEO-->

<meta name="description" content="һ��ѧϰ����ĥ����������"/>



<meta name="keywords" content="�����������˼����ʲ�����ȫ"/>



<meta name="robots" content="all" />
<meta name="google" content="all" />
<meta name="googlebot" content="all" />
<meta name="verify" content="all" />
    <!--Title-->


<title>什么是以太坊Gasper协议？ | BlockCamp</title>


    <link rel="alternate" href="/atom.xml" title="BlockCamp" type="application/atom+xml">


    <link rel="icon" href="/logo01.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan class='cnzz_stat_icon_1263868967 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263868967%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
		</script>
	</div>






    
</head>


<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  style="background-image:url(http://7xpw2b.com1.z0.glb.clouddn.com/hexo-sinppet/img/banner.jpg)"  >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='BlockSafe Lab'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                <h2> 区块链学习小栈 </h2>
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>Home</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/学习园地/"><i class="fa "></i>学习园地</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/技术文章/"><i class="fa "></i>技术文章</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/链海导航/"><i class="fa "></i>链海导航</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/下载区/"><i class="fa "></i>下载区</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>时间轴</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="什么是以太坊Gasper协议？">
            
	            什么是以太坊Gasper协议？
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a href="/categories/学习园地">
            学习园地
        </a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
                
                    <a href="/tags/以太坊" title='以太坊'>
                        以太坊
                    </a>
                
                    <a href="/tags/POS" title='POS'>
                        POS
                    </a>
                
                    <a href="/tags/Gasper" title='Gasper'>
                        Gasper
                    </a>
                
            
        </span>
    </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2018/06/26</span>
        </span>
    
</div>

            
            
    </div>
    
    <div class="post-body post-content">
        <blockquote>
<p>要讲清楚以太坊的Casper协议，首先要从先共识机制讲起，然后才能明白POW和POS(包括Casper)各解决什么问题。</p>
</blockquote>
<h2 id="共识机制"><a href="#共识机制" class="headerlink" title="共识机制"></a>共识机制</h2><p>区块链是一种去中心化的分布式账本，与传统的中心化系统相比，具有不可篡改和不依赖任何<br>第三方的优点。</p>
<p>但是在这个账本中，因为没有了一个可信任的第三方，就带来了由谁来进行记账，以及由于网<br>络延迟可能造成若干节点所观察到的事务先后顺序不能完全一致的问题。这就需要每个节点对<br>在某一时间内发生的事务的先后顺序和最终由谁来记账有一个共识。</p>
<p>所以“共识机制”就是对某一个时间内的事务的先后顺序，以及由谁来记账达成共识的算法。</p>
<h2 id="POW（工作量证明机制）"><a href="#POW（工作量证明机制）" class="headerlink" title="POW（工作量证明机制）"></a>POW（工作量证明机制）</h2><p>众所周知，比特币利用了POW解决了去中心化系统中的信任问题，通过贡献算力来竞争最终<br>的记账权。理论上来说POW只要算力达不到51%就不能对账本的信息进行篡改，也就是不能<br>作恶，本质上是通过提高作恶的成本来预防作恶。但是有个别的矿池其算力曾短暂达到5<br>0%，而且这种情况发生了不止一次，再加上POW本身具有海量能源消耗的缺点，于是人们就<br>提出了POS机制。</p>
<p><img src="http://pawrksyv1.bkt.clouddn.com/gasper-02.png" alt="全球Hash算力分布图"></p>
<h2 id="POS（权益证明机制）"><a href="#POS（权益证明机制）" class="headerlink" title="POS（权益证明机制）"></a>POS（权益证明机制）</h2><p>POW机制是拥有算力越大，则成为下一个记账人的概率越大。而POS将POW中的算力改成了<br>系统权益，既在系统中拥有权益越大则成为下一个记账人的概率越大。<br>POS有点类似于我们熟知的股权，你在一个公司中握有的股权越多，你在公司中的话语权就<br>越大，所以也有人叫它“股权证明机制”。其逻辑就是一个人在这个系统中的权益越多，就越<br>不会在这个系统中作恶，因为如果这个人在系统中作恶，就损害了这个系统，那么这个人在系<br>统中的权益将会贬值，这也就变相的提高了人们作恶的成本。</p>
<p>POS最大的优点就是不用再贡献算力，这就意味着非常省电。</p>
<p>但是POS同样具有缺陷。在系统中拥有权益越大则成为下一个记账人的概率越大，这并不意<br>味着这个人100%会得到记账权，如果有一个人在系统中的权益并没有大到能让他放弃作恶，<br>他作恶的成本是小于他作恶的收益的，那么这个系统就会受到威胁（无利害关系问题）。<br>为了应对这个问题，后来又出现了POS的变种DPOS，这个机制简单粗暴，没权益的干脆就没<br>机会参与记账，只有那些权益高的人才能参加共识，但是这样就变成了一个本质上是中心化的</p>
<h2 id="以太坊的POS-Casper"><a href="#以太坊的POS-Casper" class="headerlink" title="以太坊的POS(Casper)"></a>以太坊的POS(Casper)</h2><p>Casper是一种基于保证金的经济激励共识协议，它的出现是为了解决POS中的无利<br>害关系问题。</p>
<p>简单地说，一帮子在系统中拥有权益的人，通过支付在系统中的权益下注，来进行这一次记账的共识。获<br>得下注最多的那个记账行为将被认可为有效而保存在系统中，如果下注下对了，那么这帮子人<br>就能从这次下注的过程中获得奖励。如果这帮子人中有人想作恶，将注下在了其他记账行为<br>上，而这个记账行为并不被大多数人所认可，被大多人认为是无效的记账行为，那么下的注也<br>就会被没收。</p>
<h2 id="Casper跟其他PoS协议到底哪里不一样呢？"><a href="#Casper跟其他PoS协议到底哪里不一样呢？" class="headerlink" title="Casper跟其他PoS协议到底哪里不一样呢？"></a>Casper跟其他PoS协议到底哪里不一样呢？</h2><p>Casper实施了一个进程，使得它可以惩罚所有的恶意因素。这就是权益证明在Casper下是如何工作的：</p>
<p>验证者押下一定比例的他们拥有的以太币作为保证金。<br>然后，他们将开始验证区块。也就是说，当他们发现一个可以他们认为可以被加到链上的区块的时候，他们将以通过押下赌注来验证它。<br>如果该区块被加到链上，然后验证者们将得到一个跟他们的赌注成比例的奖励。<br>但是，如果一个验证者采用一种恶意的方式行动、试图做“无利害关系”的事，他们将立即遭到惩罚，他们所有的权益都会被砍掉。<br>正如你可以看到的，Casper被设计成可以在一个无需信任的系统上工作，并且是更加拜占庭容错的。</p>
<p>任何人，如果以一种恶意的，或者说是拜占庭叛徒式的方式行动，就会立即受到惩罚、失去他们的保证金。这就是它不同于其他权益证明协议的地方。恶意元素会失去一些东西，所以，“无利害关系”是不可能的。</p>
<p>这不是唯一一个Casper可以惩罚验证者的地方。</p>
<blockquote>
<p>正如Hudson James以及Joris Bontje在“StackExchange”的回答中标注的那样，Casper设计了苛刻的激励来保证网络的安全，包括惩罚离线的矿工，不管ta是有意还是无意的。</p>
</blockquote>
<p>这意味着验证者将不得不变得对他们的节点正常运行时间小心翼翼。粗心或者懒惰都将导致他们失去自己保证金。这一属性减少了对交易和整体利用率的审查。围绕着所有这些，这种“惩罚”属性同样给予了Casper相对标准工作量证明协议的明显优势。</p>
<h2 id="Casper不是一个具体的项目。"><a href="#Casper不是一个具体的项目。" class="headerlink" title="Casper不是一个具体的项目。"></a>Casper不是一个具体的项目。</h2><p>它是两个研究项目的融合，这两个在最近一直由以太坊开发者团队承担：</p>
<ul>
<li>Casper the Friendly Finality Gadget（FFG）</li>
</ul>
<ul>
<li>Casper the Friendly GHOST: Correct-by-Construction（CBC）</li>
</ul>
<h3 id="Casper-FFG"><a href="#Casper-FFG" class="headerlink" title="Casper FFG"></a>Casper FFG</h3><p>Casper FFG也就是众所周知的Vitalik版Casper，是一个混合PoW/PoS共识机制。它是正准备进行初步应用的版本，也是被精心设计好来缓冲权益证明的转变过程的。设计的方式是，一个权益证明协议被叠加在正常的以太坊版工作量证明协议上。虽然区块仍将通过工作量证明来挖出，每50个区块就将有一个权益证明检查点，也就是网络中验证者评估确定性（Finality）的地方。</p>
<h3 id="什么是确定性（Finality）"><a href="#什么是确定性（Finality）" class="headerlink" title="什么是确定性（Finality）?"></a>什么是确定性（Finality）?</h3><p>确定性（Finality），从一个非常宽松的意义上来说，意味着一旦一个特定的操作完成，它将永远被蚀刻在历史上，没有任何东西可以逆转这个操作。在处理金融事务的领域，这是非常重要的。想象Alice在一个公司里拥有特定数目的一种资产。就算公司的某些进程中出了一点小故障，她也不应该需要恢复对该资产的所有权（因为小故障并不影响她的所有权）。</p>
<p>有人说，工作量证明是唯一一种在区块链上实现确定性的方式。但是，这并不是必然正确的。真相远比这个要复杂很多。</p>
<p>正如Vitalic Buterin提出的，世界上没有一个系统可以提供100%的确定性。黑进一个系统，或者物理上破解一份注册表并篡改数字以改变一个人的资产负债表，都是有可能的。这也是中心化机构的一个大问题。但是，分布式的系统也会面临同样的问题。</p>
<p>实际上，比特币，工作量证明机制的典范，至少三次曾经面临确定性问题。在一个例子中，链必须分叉，因为一个Bug存在于软件的一个版本中但在其它版本中并不存在。这在社区中导致了分裂，一部分人拒接接受被另一部分人所接受的链。这次分裂在6个小时中被解决。</p>
<p>所以，问题在于，Casper FFG如何能够提供确定性？根据Vitalik的说法 ，因为下面三个理由，Casper保证可以提供比工作量证明更强的确定性：</p>
<p>完全经济确定性。三分之二的验证者会下最大几率的赌注使区块达到最终一致。因此，对他们来说，串谋以及攻击网络的激励是非常小的，因为，如果他们这样做的话，他们将危及自己的保证金。Vlad Zamfir更好地解释了这一点，他说：“设想一种版本的工作量证明，如果你参与一场51%供给的话，你的矿机会烧毁。”<br>假设整个网络由三个人组成：Alice，Bob，和Charlie。假设Alice和Bob将他们的保证金放在一种结论上，同时，Bob和Charlie把他们的保证金放在一个与之对立的结论上。不管发生什么事，Alice或者Charlie其中一人肯定会损失一大笔钱。所以，正如你可以看到的，验证者没有动机去串谋或用恶意的方式行动，因为他们总会失去一大笔钱。<br>然而，如果双重确定性（Double Finality）发生的话，还有一种意外事故处理方案。如果双重确定性发生的话，用户可以选择他们想到哪条链上去。不管哪条链，得到多数票的就成为主链。基本上，在Casper上，双重确认会导致硬分叉而不是回滚。</p>
<h3 id="Casper-CBC"><a href="#Casper-CBC" class="headerlink" title="Casper CBC"></a>Casper CBC</h3><p>Casper CBC也就是我们所知的Vlad版Casper使用建构修正（correct-by-construction，CBC）协议。</p>
<p>那什么是CBC协议呢？</p>
<p>这是一个普通的协议设计的样子：</p>
<p>你正式指定协议。<br>定义该协议必须满足的属性。<br>证明该协议可以满足给定的属性。<br>而CBC协议的样子是：</p>
<p>你正式地但只是部分地指定协议。<br>定义该协议必须指定的属性。<br>从满足所有它被规定去指明的属性中推导出该协议。<br>用大白话来说，你是动态地推导出该协议的。获得完整协议的其中一种方式是运行一种Vald称为“理想对手（ideal adversary）”的预估安全预言机（estimate safety oracle），它运行下列两者之一：</p>
<p>提出一个合理估计的错误的例外情况。<br>列出所有在未来可能发生的错误。<br>所以，这个理想对手要做的事情，就是不断进行微调、让这个只是部分建构好的协议更加完美，直到它变成完全版。</p>
<p>可以看到的是，以太坊开发者团队一直在努力地开发这两个Casper项目。很明显，这不会是最终版本，但不管这最终版本是什么，它肯定会受到Vlad的和Vitalik的Casper的深刻影响。正如刚刚提到过的，Vitalik的Casper将被初步运行以缓冲从PoW到PoS的转变。而Vlad的Casper，通过使用一个“理想对手”推导出一个安全性论证。</p>

    </div>

    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="" target="_blank">BlockSafe Lab. </a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
    
        <a href="/2018/06/26/比特币背后的密码学原理/" class="next-post btn btn-default" title='比特币背后的密码学原理'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">比特币背后的密码学原理</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
<div id="lv-container" data-id="city" data-uid="MTAyMC8zNzM5Ni8xMzkzMA">
  <script type="text/javascript">
     (function(d, s) {
         var j, e = d.getElementsByTagName(s)[0];
         if (typeof LivereTower === 'function') { return; }
         j = d.createElement(s);
         j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
         j.async = true;
         e.parentNode.insertBefore(j, e);
     })(document, 'script');
  </script>
</div>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#共识机制"><span class="toc-text">共识机制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#POW（工作量证明机制）"><span class="toc-text">POW（工作量证明机制）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#POS（权益证明机制）"><span class="toc-text">POS（权益证明机制）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#以太坊的POS-Casper"><span class="toc-text">以太坊的POS(Casper)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Casper跟其他PoS协议到底哪里不一样呢？"><span class="toc-text">Casper跟其他PoS协议到底哪里不一样呢？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Casper不是一个具体的项目。"><span class="toc-text">Casper不是一个具体的项目。</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Casper-FFG"><span class="toc-text">Casper FFG</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#什么是确定性（Finality）"><span class="toc-text">什么是确定性（Finality）?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Casper-CBC"><span class="toc-text">Casper CBC</span></a></li></ol></li></ol>
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<!--<a id="toc-btn">
    <i class="fa fa-bars"></i>
</a>-->

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12"> 
                <span>Copyright &copy; 2017 BlockSafe Lab. All Rights Reserved.
                </span> | 
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> | 
                <span>
                </span>
            </div>
        </div>
    </div>
</div>



	<script src="/js/search.js?rev=@@hash"></script>


<script src="/js/app.js?rev=@@hash"></script>


</body>
</html>